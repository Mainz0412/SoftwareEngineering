# 🚀 智慧自习室系统 - 本地运行指南

## 📋 环境准备

### 1. 必需软件
- ✅ **JDK 1.8 或以上** - 后端运行环境
- ✅ **Maven 3.6+** - 后端构建工具
- ✅ **MySQL 5.7 或 8.0** - 数据库
- ✅ **Node.js 14+ 和 npm** - 前端运行环境

### 2. 检查环境
在 PowerShell 中运行以下命令检查:
```powershell
java -version
mvn -version
mysql --version
node -version
npm -version
```

---

## 🗄️ 步骤一: 配置数据库

### 1.1 启动 MySQL 服务
确保 MySQL 服务正在运行。

### 1.2 创建数据库用户
以 root 用户登录 MySQL:
```powershell
mysql -u root -p
```

执行以下 SQL 命令:
```sql
-- 创建数据库用户
CREATE USER 'wisdom'@'localhost' IDENTIFIED BY 'wisdom_study_room';

-- 授予权限
GRANT ALL PRIVILEGES ON wisdom_study_room.* TO 'wisdom'@'localhost';

-- 刷新权限
FLUSH PRIVILEGES;

-- 退出
EXIT;
```

### 1.3 初始化数据库
在项目根目录执行:
```powershell
mysql -u wisdom -p < init-database.sql
# 输入密码: wisdom_study_room
```

### 1.4 验证数据库
登录验证:
```powershell
mysql -u wisdom -pwisdom_study_room wisdom_study_room
```

查看表:
```sql
SHOW TABLES;
SELECT * FROM user;
EXIT;
```

---

## 🔧 步骤二: 启动后端服务

### 2.1 进入后端目录
```powershell
cd "c:\Users\czy-0\OneDrive - czy0412\Lessons\软件工程设计\Wisdom-Study-Room-master\Wisdom-Study-Room-master"
```

### 2.2 清理并构建项目
```powershell
mvn clean package -DskipTests
```

### 2.3 启动 Spring Boot 应用
```powershell
mvn spring-boot:run
```

或者直接运行打包好的 jar:
```powershell
java -jar target/demo-0.0.1-SNAPSHOT.jar
```

### 2.4 验证后端
后端启动成功后,访问: http://localhost:8080

你应该能看到 API 响应 (可能是 404 或者欢迎页面)。

---

## 🎨 步骤三: 启动前端服务

### 3.1 打开新的 PowerShell 窗口

### 3.2 进入前端目录
```powershell
cd "c:\Users\czy-0\OneDrive - czy0412\Lessons\软件工程设计\Wisdom-Study-Room-master\Wisdom-Study-Room-master\vue_project"
```

### 3.3 安装依赖
```powershell
npm install
```

如果安装较慢,可以使用淘宝镜像:
```powershell
npm install --registry=https://registry.npmmirror.com
```

### 3.4 启动开发服务器
```powershell
npm run serve
```

### 3.5 访问前端
前端启动成功后,在浏览器访问:
- **本地访问**: http://localhost:8081
- **网络访问**: http://192.168.x.x:8081 (终端会显示具体地址)

---

## 🎯 测试系统

### 默认测试账号

#### 管理员账号
- **账号**: `admin`
- **密码**: `admin123`
- **权限**: 管理员

#### 普通用户账号
- **账号**: `testuser`
- **密码**: `user123`
- **权限**: 普通用户

### 功能测试
1. ✅ 用户注册
2. ✅ 用户登录
3. ✅ 浏览自习室
4. ✅ 预约座位
5. ✅ 签到/签退
6. ✅ 查看我的预约
7. ✅ 管理员功能 (使用 admin 账号登录)

---

## ❗ 常见问题

### 问题 1: 数据库连接失败
**错误**: `Access denied for user 'wisdom'@'localhost'`

**解决**:
1. 检查 MySQL 服务是否启动
2. 确认用户名密码正确
3. 重新执行数据库用户创建命令

### 问题 2: 端口被占用
**错误**: `Port 8080 is already in use`

**解决**:
- 修改 `src/main/resources/application.properties`:
  ```properties
  server.port=8081
  ```

### 问题 3: Maven 依赖下载失败
**解决**:
- 配置国内 Maven 镜像 (阿里云)
- 检查网络连接

### 问题 4: npm 安装依赖失败
**解决**:
```powershell
# 清除缓存
npm cache clean --force

# 删除 node_modules 和 package-lock.json
Remove-Item -Recurse -Force node_modules
Remove-Item -Force package-lock.json

# 重新安装
npm install --registry=https://registry.npmmirror.com
```

### 问题 5: 跨域问题 (CORS)
如果前后端通信出现跨域错误,检查后端是否配置了 CORS。

---

## 🔄 停止服务

### 停止后端
在后端终端按 `Ctrl + C`

### 停止前端
在前端终端按 `Ctrl + C`

### 停止 MySQL
```powershell
# 停止 MySQL 服务 (需要管理员权限)
net stop mysql
```

---

## 📦 项目结构

```
Wisdom-Study-Room-master/
├── src/                          # 后端 Spring Boot 代码
│   ├── main/
│   │   ├── java/com/huawei/web/
│   │   │   ├── controller/      # 控制器层
│   │   │   ├── service/         # 业务逻辑层
│   │   │   ├── mapper/          # 数据访问层
│   │   │   ├── entity/          # 实体类
│   │   │   └── util/            # 工具类
│   │   └── resources/
│   │       └── application.properties  # 配置文件
├── vue_project/                  # 前端 Vue.js 代码
│   ├── src/
│   │   ├── views/               # 页面组件
│   │   ├── router/              # 路由配置
│   │   └── App.vue              # 根组件
│   └── package.json             # 前端依赖
├── pom.xml                       # Maven 配置
└── init-database.sql             # 数据库初始化脚本
```

---

## 🌟 后续优化建议

1. **安全性**: 密码应该加密存储 (MD5/BCrypt)
2. **数据验证**: 添加更多前后端数据验证
3. **错误处理**: 完善异常处理机制
4. **日志系统**: 使用 Logback 记录详细日志
5. **API 文档**: 集成 Swagger 生成 API 文档

---

## 📞 技术支持

如有问题,请检查:
1. 📄 控制台输出的错误信息
2. 📝 后端日志文件
3. 🌐 浏览器开发者工具 (F12)

---

**祝您使用愉快! 🎉**
